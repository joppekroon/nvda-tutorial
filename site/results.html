<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Results - Screen Reader Quiz</title>

	<link rel="stylesheet" href="style/base.css">
	<style>
		h2 {
			margin-top: 4rem;
		}

		details {
			margin-bottom: 4rem;
		}

		a {
			color: currentColor;
		}

		.hidden {
			display: none;
		}

		.correct .result-icon {
			color: #007936;
		}

		.failed .result-icon {
			color: #d30038;
		}

		@media (prefers-color-scheme: dark) {
			.correct .result-icon {
				color: #00d061;
			}

			.failed .result-icon {
				color: #ff97a0;
			}
		}
	</style>

	<link rel="icon" href="favicon.svg">
</head>

<body>
	<header>
		<h1>Your Results: <span id="score"></span> out of 5</h1>
	</header>

	<!-- TODO fix the questions/ answers -->

	<main>
		<p>
			There is a <a href="cheat-sheet.html">cheat-sheet</a> of the controls from this tutorial and a little more.
		</p>
		<p>
			If you want to dive deeper, you can find a bigger <a
				href="https://webaim.org/resources/shortcuts/nvda">cheat-sheet by WebAim</a>, or go to the <a
				href="https://www.nvaccess.org/files/nvda/documentation/userGuide.html">NVDA User Guide</a>.
		</p>

		<h2>
			<a href="question1.html">
				Everything in Order?
			</a>
		</h2>
		<p>
			<span id="q1-correct" class="correct hidden">
				<span class="result-icon" aria-hidden="true">✓</span> Correct
			</span>
			<span id="q1-failed" class="failed hidden">
				<span class="result-icon" aria-hidden="true">✕</span> Incorrect
			</span>
			:
			<span id="q1-answer"></span>
		</p>
		<details>
			<summary>Show solution</summary>
			<p>
				The order of the items has been changed in CSS, but the screen reader only looks at the order in the HTML.
			</p>
		</details>

		<h2>
			<a href="question2.html">
				I Spy With My Little Eye
			</a>
		</h2>
		<p>
			<span id="q2-correct" class="correct hidden">
				<span class="result-icon" aria-hidden="true">✓</span> Correct
			</span>
			<span id="q2-failed" class="failed hidden">
				<span class="result-icon" aria-hidden="true">✕</span> Incorrect
			</span>
			:
			<span id="q2-answer"></span>
		</p>
		<details>
			<summary>Show solution</summary>
			<p>
				The last list item and corresponding radio button have been visually hidden, but they are visible to the screen
				reader.
			</p>
		</details>

		<h2>
			<a href="question3.html">
				Are My Eyes Deceiving Me?
			</a>
		</h2>
		<p>
			<span id="q3-correct" class="correct hidden">
				<span class="result-icon" aria-hidden="true">✓</span> Correct
			</span>
			<span id="q3-failed" class="failed hidden">
				<span class="result-icon" aria-hidden="true">✕</span> Incorrect
			</span>
			:
			<span id="q3-answer"></span>
		</p>
		<details>
			<summary>Show solution</summary>
			<p>
				The labels of the radio buttons have been replaced with definitions of types of instruments using
				<code>aria-label</code> and <code>aria-hidden</code>. The list of items is just a decoy.
			</p>
		</details>

		<h2>
			<a href="question4.html">
				A Picture is Worth a Thousand Words
			</a>
		</h2>
		<p>
			<span id="q4-correct" class="correct hidden">
				<span class="result-icon" aria-hidden="true">✓</span> Correct
			</span>
			<span id="q4-failed" class="failed hidden">
				<span class="result-icon" aria-hidden="true">✕</span> Incorrect
			</span>
			:
			<span id="q4-answer"></span>
		</p>
		<details>
			<summary>Show solution</summary>
			<p>
				The alt texts do not match the pictures, one image is even made invisible due to an empty alt attribute.
			</p>
		</details>

		<h2>
			<a href="question5.html">
				Mark My Words
			</a>
		</h2>
		<p>
			<span id="q5-correct" class="correct hidden">
				<span class="result-icon" aria-hidden="true">✓</span> Correct
			</span>
			<span id="q5-failed" class="failed hidden">
				<span class="result-icon" aria-hidden="true">✕</span> Incorrect
			</span>
			:
			<span id="q5-answer"></span>
		</p>
		<details>
			<summary>Show solution</summary>
			<p>
				One link has it's underline removed, and some underlined words are not links at all.
			</p>
		</details>
	</main>

	<footer>
		<a href="index.html">Home</a>
		<a href="site-map.html">Site Map</a>
		<a href="privacy.html">Privacy Statement</a>
	</footer>

	<script>
		function processAnswer(key, correctAnswer) {
			const answer = localStorage.getItem(key);
			document.querySelector(`#${key}-answer`).textContent = answer || 'unanswered';

			if (answer == correctAnswer) {
				document.querySelector(`#${key}-correct`).classList.remove('hidden');

				return true;
			}
			else {
				document.querySelector(`#${key}-failed`).classList.remove('hidden');

				return false;
			}
		}

		let correctAnswers = 0;

		correctAnswers += processAnswer('q1', 'D');
		correctAnswers += processAnswer('q2', 'B');
		correctAnswers += processAnswer('q3', 'A');
		correctAnswers += processAnswer('q4', 'D');
		correctAnswers += processAnswer('q5', 'A');

		document.querySelector('#score').textContent = correctAnswers;
	</script>
</body>

</html>